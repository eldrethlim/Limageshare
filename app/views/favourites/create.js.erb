<% if @favourite.valid? %>
  $('#favourite_counter').replaceWith("<%= escape_javascript(render(partial: '/images/favourite_counter')) %>");
  $('#favouriter').replaceWith("<%= escape_javascript(render(partial: '/favourites/unfavourite', locals: { image: @image, favourite: @favourite })) %>");
  $('#flash_messages').html("<%= escape_javascript(render(partial: '/layouts/flash')) %>");
<% else %>
  $('#flash_messages').html("<%= escape_javascript(render(partial: 'layouts/flash')) %>");
<% end %>